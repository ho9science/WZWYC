<meta charset="utf-8">
<style>
    path {
        stroke: white;
        stroke-width: 0.25px;
        fill: grey;
    }
    .zone_label {
        font-weight: 900;
    }
</style>

<body>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script>
        var width = 1060,
            height = 500;

        var projection = d3.geoMercator()
            .center([0, 35])
            .scale(135)
            .rotate([-160, 0]); 

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

        var path = d3.geoPath()
            .projection(projection);

        d3.json("section.json").then(function (data) {
            svg.append("g").selectAll("polygon")
                .data(data.Polygons)
                .enter().append("polygon")
                .attr("points", function (d) {
                    return d.points.map(function (d) { return [d.x, d.y].join(","); }).join(" ");
                })
                .attr("stroke", "black")
                .attr("stroke-width", 2)
                .attr("name", function (d) {
                    return d.name;
                })
                .attr("fill", "transparent")
                .on("click", handleMouseClick)
                .on("mouseover", handleMouseOver)
                .on("mouseout", handleMouseOut);
            svg.selectAll("text")
                .data(data.Polygons)
                .enter()
                .append("text")
                .attr("class", "zone_label")
                .attr("x", function(d){return d.center.x})
                .attr("y", function(d){return d.center.y})
                .text(function (d) { return d.name; });
        });

        var g = svg.append("g");
        d3.json("world-110m2.json").then(function (topology) {

            g.selectAll("path")
                .data(topojson.feature(topology, topology.objects.countries).features)
                .enter().append("path")
                .attr("d", path);

        });

        function handleMouseClick() {
            alert("당신은 구역" + d3.select(this).attr("name") + "를 선택하셨습니다.");
        }

        function handleMouseOver() {
            d3.select(this).style("fill", "red");
        }

        function handleMouseOut() {
            d3.select(this).style("fill", "none");
        }
        
    </script>
</body>

</html>